<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>动态规划 | 前端知识小记</title>
    <meta name="description" content="Personal Front End Knowledge Map">
    <link rel="icon" href="/FEMap/logo.png">
  <link rel="manifest" href="/FEMap/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="./public/logo.png">
  <meta name="msapplication-TileImage" content="./public/logo.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/FEMap/assets/css/0.styles.46758652.css" as="style"><link rel="preload" href="/FEMap/assets/js/app.07aba767.js" as="script"><link rel="preload" href="/FEMap/assets/js/7.41c30484.js" as="script"><link rel="prefetch" href="/FEMap/assets/js/10.6160a8a1.js"><link rel="prefetch" href="/FEMap/assets/js/11.58d7da13.js"><link rel="prefetch" href="/FEMap/assets/js/12.d82377e4.js"><link rel="prefetch" href="/FEMap/assets/js/13.69c6fc0a.js"><link rel="prefetch" href="/FEMap/assets/js/14.11c8990d.js"><link rel="prefetch" href="/FEMap/assets/js/15.e7e5ac4e.js"><link rel="prefetch" href="/FEMap/assets/js/16.74f923c2.js"><link rel="prefetch" href="/FEMap/assets/js/17.d4cda157.js"><link rel="prefetch" href="/FEMap/assets/js/18.47acc33a.js"><link rel="prefetch" href="/FEMap/assets/js/19.cd73ed28.js"><link rel="prefetch" href="/FEMap/assets/js/2.df56f01e.js"><link rel="prefetch" href="/FEMap/assets/js/20.46d38a64.js"><link rel="prefetch" href="/FEMap/assets/js/21.c86d268c.js"><link rel="prefetch" href="/FEMap/assets/js/22.2a5c5ef9.js"><link rel="prefetch" href="/FEMap/assets/js/23.10cb81bf.js"><link rel="prefetch" href="/FEMap/assets/js/24.be70320c.js"><link rel="prefetch" href="/FEMap/assets/js/25.8ea26c41.js"><link rel="prefetch" href="/FEMap/assets/js/26.e52d061e.js"><link rel="prefetch" href="/FEMap/assets/js/27.f4257bb6.js"><link rel="prefetch" href="/FEMap/assets/js/28.da932e8e.js"><link rel="prefetch" href="/FEMap/assets/js/29.0c93adb6.js"><link rel="prefetch" href="/FEMap/assets/js/3.c20905f7.js"><link rel="prefetch" href="/FEMap/assets/js/30.a9c3edb7.js"><link rel="prefetch" href="/FEMap/assets/js/31.06c0bd16.js"><link rel="prefetch" href="/FEMap/assets/js/32.e8032021.js"><link rel="prefetch" href="/FEMap/assets/js/33.b18fa339.js"><link rel="prefetch" href="/FEMap/assets/js/34.3db52ecb.js"><link rel="prefetch" href="/FEMap/assets/js/35.6fc0c7d0.js"><link rel="prefetch" href="/FEMap/assets/js/36.2635250b.js"><link rel="prefetch" href="/FEMap/assets/js/37.04bd4304.js"><link rel="prefetch" href="/FEMap/assets/js/38.eca7423d.js"><link rel="prefetch" href="/FEMap/assets/js/39.7bc43a19.js"><link rel="prefetch" href="/FEMap/assets/js/4.44c0aa72.js"><link rel="prefetch" href="/FEMap/assets/js/40.d012cce0.js"><link rel="prefetch" href="/FEMap/assets/js/41.3c942633.js"><link rel="prefetch" href="/FEMap/assets/js/42.a1671e8d.js"><link rel="prefetch" href="/FEMap/assets/js/43.221d040e.js"><link rel="prefetch" href="/FEMap/assets/js/44.01b4fee0.js"><link rel="prefetch" href="/FEMap/assets/js/45.f2e2ea06.js"><link rel="prefetch" href="/FEMap/assets/js/46.7ec82695.js"><link rel="prefetch" href="/FEMap/assets/js/47.0e955f03.js"><link rel="prefetch" href="/FEMap/assets/js/48.91c5d6d5.js"><link rel="prefetch" href="/FEMap/assets/js/49.568d659d.js"><link rel="prefetch" href="/FEMap/assets/js/5.4007d5b2.js"><link rel="prefetch" href="/FEMap/assets/js/50.ed024948.js"><link rel="prefetch" href="/FEMap/assets/js/51.e33531d0.js"><link rel="prefetch" href="/FEMap/assets/js/52.ad8a1762.js"><link rel="prefetch" href="/FEMap/assets/js/53.267f2d4f.js"><link rel="prefetch" href="/FEMap/assets/js/54.65af1a35.js"><link rel="prefetch" href="/FEMap/assets/js/55.dc78eaa5.js"><link rel="prefetch" href="/FEMap/assets/js/56.11966346.js"><link rel="prefetch" href="/FEMap/assets/js/57.df055972.js"><link rel="prefetch" href="/FEMap/assets/js/58.8a361639.js"><link rel="prefetch" href="/FEMap/assets/js/59.998b1de9.js"><link rel="prefetch" href="/FEMap/assets/js/6.41d00c0a.js"><link rel="prefetch" href="/FEMap/assets/js/60.b5c2cae7.js"><link rel="prefetch" href="/FEMap/assets/js/61.f2cc1d27.js"><link rel="prefetch" href="/FEMap/assets/js/62.7be0ab04.js"><link rel="prefetch" href="/FEMap/assets/js/63.6ebfd592.js"><link rel="prefetch" href="/FEMap/assets/js/64.e96b5edb.js"><link rel="prefetch" href="/FEMap/assets/js/65.03c5da29.js"><link rel="prefetch" href="/FEMap/assets/js/66.ef16a307.js"><link rel="prefetch" href="/FEMap/assets/js/67.e0c5beb3.js"><link rel="prefetch" href="/FEMap/assets/js/68.b436f696.js"><link rel="prefetch" href="/FEMap/assets/js/69.79957ff2.js"><link rel="prefetch" href="/FEMap/assets/js/70.a0613b33.js"><link rel="prefetch" href="/FEMap/assets/js/8.db996418.js"><link rel="prefetch" href="/FEMap/assets/js/9.c21a2975.js">
    <link rel="stylesheet" href="/FEMap/assets/css/0.styles.46758652.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/FEMap/" class="home-link router-link-active"><!----> <span class="site-name">前端知识小记</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/JiWeiZ/FEMap" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"> <a href="https://github.com/JiWeiZ/FEMap" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>JS</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/JS/array.html" class="sidebar-link">数组相关</a></li><li><a href="/FEMap/JS/object.html" class="sidebar-link">对象相关</a></li><li><a href="/FEMap/JS/function.html" class="sidebar-link">函数和闭包</a></li><li><a href="/FEMap/JS/event.html" class="sidebar-link">事件代理</a></li><li><a href="/FEMap/JS/event-loop.html" class="sidebar-link">Event Loop</a></li><li><a href="/FEMap/JS/distance.html" class="sidebar-link">页面各种距离</a></li><li><a href="/FEMap/JS/regex.html" class="sidebar-link">正则表达式</a></li><li><a href="/FEMap/JS/ajax.html" class="sidebar-link">Ajax</a></li><li><a href="/FEMap/JS/high-level.html" class="sidebar-link">高阶函数</a></li><li><a href="/FEMap/JS/byhand.html" class="sidebar-link">手写系列</a></li><li><a href="/FEMap/JS/repaint-reflow.html" class="sidebar-link">重绘和回流</a></li><li><a href="/FEMap/JS/recursive.html" class="sidebar-link">递归的优化</a></li><li><a href="/FEMap/JS/GC.html" class="sidebar-link">垃圾收集和内存泄漏</a></li><li><a href="/FEMap/JS/async-solution.html" class="sidebar-link">异步解决方案</a></li><li><a href="/FEMap/JS/design-patterns.html" class="sidebar-link">设计模式</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/CSS/css-selector.html" class="sidebar-link">CSS选择器</a></li><li><a href="/FEMap/CSS/text.html" class="sidebar-link">文本</a></li><li><a href="/FEMap/CSS/visual-format.html" class="sidebar-link">基本视觉格式化</a></li><li><a href="/FEMap/CSS/float-position.html" class="sidebar-link">浮动和定位</a></li><li><a href="/FEMap/CSS/visibility-z-index.html" class="sidebar-link">可见性和z-index</a></li><li><a href="/FEMap/CSS/layout.html" class="sidebar-link">布局</a></li><li><a href="/FEMap/CSS/CSS3-flex.html" class="sidebar-link">CSS3: flex</a></li><li><a href="/FEMap/CSS/CSS3-grid.html" class="sidebar-link">CSS3: grid</a></li><li><a href="/FEMap/CSS/CSS3-animation.html" class="sidebar-link">CSS3: animation</a></li><li><a href="/FEMap/CSS/CSS3-background.html" class="sidebar-link">CSS3: background</a></li><li><a href="/FEMap/CSS/CSS3-border.html" class="sidebar-link">CSS3: border</a></li><li><a href="/FEMap/CSS/CSS3-font.html" class="sidebar-link">CSS3: font</a></li><li><a href="/FEMap/CSS/CSS3-gradient.html" class="sidebar-link">CSS3: gradient</a></li><li><a href="/FEMap/CSS/CSS3-transform.html" class="sidebar-link">CSS3: transform</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>网络</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/Network/network-architecture.html" class="sidebar-link">五层协议</a></li><li><a href="/FEMap/Network/link-layer.html" class="sidebar-link">链路层</a></li><li><a href="/FEMap/Network/network-layer.html" class="sidebar-link">网络层</a></li><li><a href="/FEMap/Network/transport-layer.html" class="sidebar-link">运输层</a></li><li><a href="/FEMap/Network/cross-domain.html" class="sidebar-link">跨域处理</a></li><li><a href="/FEMap/Network/DNS.html" class="sidebar-link">DNS</a></li><li><a href="/FEMap/Network/CDN.html" class="sidebar-link">CDN</a></li><li><a href="/FEMap/Network/cache.html" class="sidebar-link">缓存策略</a></li><li><a href="/FEMap/Network/network-process.html" class="sidebar-link">输入url到显示页面的步骤(以HTTP为例)</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>一些题目</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/Questions/questions.html" class="sidebar-link">一些面试题</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>算法/数据结构</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/Algorithm/BST.html" class="sidebar-link">BST</a></li><li><a href="/FEMap/Algorithm/AVL.html" class="sidebar-link">AVL</a></li><li><a href="/FEMap/Algorithm/sort.html" class="sidebar-link">排序算法</a></li><li><a href="/FEMap/Algorithm/search.html" class="sidebar-link">搜索算法</a></li><li><a href="/FEMap/Algorithm/dynamic-program.html" aria-current="page" class="active sidebar-link">动态规划</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FEMap/Algorithm/dynamic-program.html#最少硬币找零问题" class="sidebar-link">最少硬币找零问题</a></li><li class="sidebar-sub-header"><a href="/FEMap/Algorithm/dynamic-program.html#_0-1背包问题" class="sidebar-link">0-1背包问题</a></li><li class="sidebar-sub-header"><a href="/FEMap/Algorithm/dynamic-program.html#最长公共子序列" class="sidebar-link">最长公共子序列</a></li><li class="sidebar-sub-header"><a href="/FEMap/Algorithm/dynamic-program.html#矩阵链相乘" class="sidebar-link">矩阵链相乘</a></li></ul></li><li><a href="/FEMap/Algorithm/greedy.html" class="sidebar-link">贪心算法</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>工程化</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/" aria-current="page" class="sidebar-link">前端知识小记</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/Vue/responsive.html" class="sidebar-link">响应式原理</a></li><li><a href="/FEMap/Vue/v-model.html" class="sidebar-link">v-model</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Node</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/" aria-current="page" class="sidebar-link">前端知识小记</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Express</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/" aria-current="page" class="sidebar-link">前端知识小记</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Koa</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/" aria-current="page" class="sidebar-link">前端知识小记</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Git</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/" aria-current="page" class="sidebar-link">前端知识小记</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="动态规划"><a href="#动态规划" class="header-anchor">#</a> 动态规划</h1> <h2 id="最少硬币找零问题"><a href="#最少硬币找零问题" class="header-anchor">#</a> 最少硬币找零问题</h2> <p>最少硬币找零问题是硬币找零问题的一个变种。</p> <p>硬币找零问题：给出要找零的钱数， 以及可用的硬币面额d1 …dn 及其数量， 找出有多少种找零方法；</p> <p>最少硬币找零问题：给出要找零的钱数，以及可用的硬币面额d1 …dn 及其数量，找到所需的最少的硬币个数。</p> <p>例如，美国有以下面额（硬币）：d1 = 1, d2 = 5, d3 = 10, d4 = 25</p> <p>如果要找36美分的零钱，我们可以用1个25美分、1个10美分和1个便士（1美分） 。</p> <p>最少硬币找零的解决方案是找到n所需的最小硬币数。但要做到这一点，首先得找到对每个x&lt;n的解。然后，我们将解建立在更小的值的解的基础上。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> times <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">function</span> <span class="token function">MinCoinChange</span><span class="token punctuation">(</span><span class="token parameter">types</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">makeChange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>amount <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">[</span>amount<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> cache<span class="token punctuation">[</span>amount<span class="token punctuation">]</span>
    <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> residualRes<span class="token punctuation">,</span> residual
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> types<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 从大面额开始找</span>
      <span class="token keyword">var</span> type <span class="token operator">=</span> types<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
      residual <span class="token operator">=</span> amount <span class="token operator">-</span> type
      <span class="token keyword">if</span> <span class="token punctuation">(</span>residual <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        residualRes <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">makeChange</span><span class="token punctuation">(</span>residual<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> residualRes<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token operator">!</span>res<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            res <span class="token operator">=</span> <span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>residualRes<span class="token punctuation">)</span>
            <span class="token comment">// console.log(`[${res.join(', ')}] for ${amount}`)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    cache<span class="token punctuation">[</span>amount<span class="token punctuation">]</span> <span class="token operator">=</span> res
    <span class="token keyword">return</span> res
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> minCoinChange <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MinCoinChange</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>minCoinChange<span class="token punctuation">.</span><span class="token function">makeChange</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p>MinCoinChange 类接收 types参数，该参数代表问题中的面额。对美国的硬币系统而言，它是 [1, 5, 10, 25] 。</p> <p>为了更加高效且不重复计算值，我们使用了 cache</p> <p>makeChange 方法是一个递归函数。res代表待返回的结果，residual代表总金额amount - type剩余的金额，而residualRes代表对residual递归之后得到的结果。显然type和residualRes合并就是我们最终想要的res</p> <p>那么什么时候合并呢？有2种情况：</p> <ol><li>res是空的应该合并</li> <li>res不是最优的，比如说amount = 6, types = [1, 2, 3]：
<ol><li>当type = 1时，res = [1, 1, 4]，继续循环</li> <li>当type = 2时，residual = 4，residualRes = [4]，此时res比residualRes的至少长度大2，此时应该合并</li></ol></li></ol> <h2 id="_0-1背包问题"><a href="#_0-1背包问题" class="header-anchor">#</a> 0-1背包问题</h2> <p>0-1背包问题是一个组合优化问题。它可以描述如下：给定一个固定大小、能够携重W的背包，以及一组有价值和重量的物品，每种物品均只有一件，找出一个最佳解决方案，使得装入背包的物品总重量不超过W，且总价值最大。</p> <table><thead><tr><th>物品#</th> <th>重量weights</th> <th>价值values</th></tr></thead> <tbody><tr><td>0</td> <td>2</td> <td>3</td></tr> <tr><td>1</td> <td>3</td> <td>4</td></tr> <tr><td>2</td> <td>4</td> <td>5</td></tr></tbody></table> <p>考虑背包能够携带的重量只有5。对于这个例子，我们可以说最佳解决方案是往背包里装入物品1和物品2，这样，总重量为5，总价值为7。</p> <p>我们需要构建一个矩阵F(i, j)来解决问题：</p> <p>i代表从0到物品总数量的选择数的递增变量，比如一共有5种不同物品，i = 0就代表没有选择，i = 1就代表可以选择第一件物品， i = 2代表可以选择第1件和第2件，i = 3代表第1,2,3件都可以选...</p> <p>j是从0到capacity的递增变量，F(i, j)代表可选数量为i，容量为j时的最优解</p> <p><strong>第一步</strong></p> <p>当j === 0时，表示背包容量为0，此时总价值必定为0；当i === 0时，没有任何选择，总价值也0</p> <table><thead><tr><th>w[i-1]</th> <th>v[i-1]</th> <th>i/j</th> <th>0</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th></tr></thead> <tbody><tr><td></td> <td></td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td></tr> <tr><td>w0 = 2</td> <td>v0 = 3</td> <td>1</td> <td>0</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>w1 = 3</td> <td>v1 = 4</td> <td>2</td> <td>0</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>w2 = 4</td> <td>v2 = 5</td> <td>3</td> <td>0</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr></tbody></table> <p><strong>第二步</strong></p> <p>i === 1时，只有1种选择，就是选择物品0。如果背包容量小于物品0的重量，F(i, j)为0；否则就是物品0的价值</p> <table><thead><tr><th>w[i-1]</th> <th>v[i-1]</th> <th>i/j</th> <th>0</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th></tr></thead> <tbody><tr><td></td> <td></td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td></tr> <tr><td>w0 = 2</td> <td>v0 = 3</td> <td>1</td> <td>0</td> <td>0</td> <td>3</td> <td>3</td> <td>3</td> <td>3</td></tr> <tr><td>w1 = 3</td> <td>v1 = 4</td> <td>2</td> <td>0</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr> <tr><td>w2 = 4</td> <td>v2 = 5</td> <td>3</td> <td>0</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr></tbody></table> <p><strong>第三步</strong></p> <p>i === 2时，有2种选择，可以选择物品0，也可以选择物品1，还可以物品0和物品1都选。如果背包容量小于物品0或物品1的重量，F(i, j)为0。所以F(2, 1) = 0</p> <p>F(2, 2)的价值也很简单，就是物品0的价值：</p> <p>​	F(2, 2) = F(1, 2)</p> <p>F(2, 3)就不一样了，此时背包容量是3，物品1的重量也是3，(即： **j &gt;= w[i-1] **)，此时既可以选物品1，也可以不选物品1而去选物品0：</p> <ol><li>如果不选物品1，F(2, 3) 就等于 F(1, 3)</li> <li>如果选物品1，F(2, 3) 就等于 v1</li></ol> <p>比较之后我们会选择第二种方案</p> <table><thead><tr><th>w[i-1]</th> <th>v[i-1]</th> <th>i/j</th> <th>0</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th></tr></thead> <tbody><tr><td></td> <td></td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td></tr> <tr><td>w0 = 2</td> <td>v0 = 3</td> <td>1</td> <td>0</td> <td>0</td> <td>3</td> <td>3</td> <td>3</td> <td>3</td></tr> <tr><td>w1 = 3</td> <td>v1 = 4</td> <td>2</td> <td>0</td> <td>0</td> <td>3</td> <td>4</td> <td></td> <td></td></tr> <tr><td>w2 = 4</td> <td>v2 = 5</td> <td>3</td> <td>0</td> <td></td> <td></td> <td></td> <td></td> <td></td></tr></tbody></table> <p>通过第3步我们可以抽象出来，如果<strong>j &gt;= w[i-1]</strong>，我们即可选物品i-1也可以不选物品i-1：</p> <ol><li>如果不选物品i - 1：F(i, j) = F(i -1, j)</li> <li>如果选物品i - 1，最高价值等于物品i -1的价值加上总容量减去物品i - 1的重量后的最高价值。也就是说确定选择物品1以后，选择数减少了1，背包容量减少了w[i - 1]，所以：F(i, j) = v[i - 1] + F[i - 1, j - w[i - 1]]</li></ol> <p><strong>剩下的步骤：</strong></p> <p>搞清楚了原理，剩下的就很简单了</p> <table><thead><tr><th>w[i-1]</th> <th>v[i-1]</th> <th>i/j</th> <th>0</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th></tr></thead> <tbody><tr><td></td> <td></td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td></tr> <tr><td>w0 = 2</td> <td>v0 = 3</td> <td>1</td> <td>0</td> <td>0</td> <td>3</td> <td>3</td> <td>3</td> <td>3</td></tr> <tr><td>w1 = 3</td> <td>v1 = 4</td> <td>2</td> <td>0</td> <td>0</td> <td>3</td> <td>4</td> <td>4</td> <td>7</td></tr> <tr><td>w2 = 4</td> <td>v2 = 5</td> <td>3</td> <td>0</td> <td>0</td> <td>3</td> <td>4</td> <td>4</td> <td>7</td></tr></tbody></table> <p>代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">backpack</span><span class="token punctuation">(</span><span class="token parameter">capacity<span class="token punctuation">,</span> w<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token constant">F</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> v<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token constant">F</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> capacity<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> j <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token constant">F</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> w<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token constant">F</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">F</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token constant">F</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token constant">F</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token constant">F</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> w<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token constant">F</span><span class="token punctuation">[</span>v<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面的代码只能显示最值的最高价值，不能显示如何选择物品，我们可以改进一下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">backpack</span><span class="token punctuation">(</span><span class="token parameter">capacity<span class="token punctuation">,</span> w<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token constant">F</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> v<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token constant">F</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> capacity<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> j <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token constant">F</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
          value<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          option<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> w<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token constant">F</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
          value<span class="token operator">:</span> <span class="token constant">F</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
          option<span class="token operator">:</span> <span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">F</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">&gt;</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token constant">F</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> w<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token constant">F</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">F</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token constant">F</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
          value<span class="token operator">:</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token constant">F</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> w<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
          option<span class="token operator">:</span> <span class="token constant">F</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> w<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>option<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token constant">F</span><span class="token punctuation">[</span>v<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> v <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> w <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> capacity <span class="token operator">=</span> <span class="token number">7</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">backpack</span><span class="token punctuation">(</span>capacity<span class="token punctuation">,</span> w<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//输出 {value: 7, option: [0, 1]}</span>

</code></pre></div><h2 id="最长公共子序列"><a href="#最长公共子序列" class="header-anchor">#</a> 最长公共子序列</h2> <p>最长公共子序列（LCS）：找出两个字符串序列的最长子序列的长度。最长子序列是指，在两个字符串序列中以相同顺序出现，但不要求连续（非字符串子串）的字符串序列。</p> <p><img src="/FEMap/assets/img/1545920442728.4b1ba1bc.png" alt="1545920442728"></p> <p>LCS不一定唯一。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">lcs</span><span class="token punctuation">(</span><span class="token parameter">wordX<span class="token punctuation">,</span> wordY</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> wordX<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> wordY<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> j <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>wordX<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> wordY<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> wordX<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> res<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res<span class="token punctuation">[</span>wordX<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>wordY<span class="token punctuation">.</span>length<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">lcs</span><span class="token punctuation">(</span><span class="token string">'acbaed'</span><span class="token punctuation">,</span> <span class="token string">'abcadf'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">lcs</span><span class="token punctuation">(</span><span class="token string">'abcadf'</span><span class="token punctuation">,</span> <span class="token string">'acbaed'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="矩阵链相乘"><a href="#矩阵链相乘" class="header-anchor">#</a> 矩阵链相乘</h2> <p>考虑如下情况：</p> <ol><li>A1是一个10行100列的矩阵</li> <li>A2是一个100行5列的矩阵</li> <li>A3是一个5行50列的矩阵</li> <li>A4是一个50行1列的矩阵</li> <li>A1*A2*A3*A4的结果是一个10行1列的矩阵</li></ol> <p>在这个例子里，相乘的方式有五种。</p> <ol><li>(A1(A2(A3A4)))：乘法运算的次数是1750次。</li> <li>((A1A2)(A3A4))：乘法运算的次数是5300次。</li> <li>(((A1A2)A3)A4)：乘法运算的次数是8000次。</li> <li>((A1(A2A3))A4)：乘法运算的次数是75 500次。</li> <li>(A1((A2A3)A4))：乘法运算的次数是31 000次。</li></ol> <p>相乘的顺序不一样，要进行的乘法运算总数也有很大差异。那么，要如何构建一个算法，求出最少的乘法运算操作次数呢？</p> <p>定义：</p> <ol><li>Ai是p(i-1) * pi维矩阵</li> <li>M[i, j] 为 Ai * A(i+1) * ... * Aj 的最少相乘数，如M12代表A1 *A2的最少相乘数，M24代表A2 * A3 * A4的最少相乘数。</li></ol> <p>动态规划的一个思想是要寻找最优子结构，所以将 M[i, j] 分为2部分：M[i, k] 和 M[k+1, j]，于是有：</p> <p><img src="data:image/png;base64,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" alt="1545967343749"></p> <p>上面这个公式假设我们已知k是多少，实际上我们并不知道，所以必须从 i 到 j 逐个检查 k 的值，于是有：</p> <p><img src="/FEMap/assets/img/1545967322756.c000279c.png" alt="1545967322756"></p> <p>伪代码如下：</p> <p><img src="/FEMap/assets/img/1545968603565.c8e0dd19.png" alt="1545968603565"></p> <ol><li><p>首先M[i, i]链的长度为0，此时M[i, i] = 0 （2, 3行）</p></li> <li><p>然后矩阵链的长度L从2开始计算，到总长度n结束（第4行）</p></li> <li><p>当矩阵链的长度为L时，i的取值范围就是[1, n - L + 1]（第5行）
<img src="data:image/png;base64,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" alt="1545968988367"></p> <p>j的值是矩阵链尾部索引，j - i等于L - 1，故j = i + L - 1</p></li> <li><p>由于我们不知道 M[i, j] 的值怎么选，所以给他一个无穷大值，将后来通过比较（第10行）再修改之</p></li></ol> <p>JS代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">matrixChainOrder</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> n <span class="token operator">=</span> p<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>
  <span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> <span class="token constant">L</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token constant">L</span> <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> <span class="token constant">L</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n <span class="token operator">-</span> <span class="token constant">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token constant">L</span> <span class="token operator">-</span> <span class="token number">1</span>
      m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token operator">=</span> i<span class="token punctuation">;</span> k <span class="token operator">&lt;=</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> q <span class="token operator">=</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> m<span class="token punctuation">[</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> p<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> p<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">*</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token comment">//{1}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>q <span class="token operator">&lt;</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> q
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>下面详细说明算法过程。回到上面的例子，p = [10,100,5,50,1]</p> <h4 id="补0循环结束后"><a href="#补0循环结束后" class="header-anchor">#</a> 补0循环结束后</h4> <p>第一个for循环结束后，m矩阵是这个样子</p> <table><thead><tr><th>i/j</th> <th>0</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th></tr></thead> <tbody><tr><td>0</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>empty</td></tr> <tr><td>1</td> <td>empty</td> <td>0</td> <td></td> <td></td> <td></td></tr> <tr><td>2</td> <td>empty</td> <td>empty</td> <td>0</td> <td></td> <td></td></tr> <tr><td>3</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>0</td> <td></td></tr> <tr><td>4</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>0</td></tr></tbody></table> <h4 id="矩阵链l长度为2"><a href="#矩阵链l长度为2" class="header-anchor">#</a> 矩阵链L长度为2</h4> <p>i = 1时，j = 2 + 1 - 1 = 2</p> <p>M[1, 2] = ∞，进入关于k的循环，k ∈ [1, 1]<br>
当k = 1时，计算q的值：<br>
q = M[1, 1] + M[2, 2] + p[0] * p[1] * p[2] = 0 + 0 + 10 * 100 * 5 = 5000<br>
比较q和M[1, 2]的值，M[1, 2] = ∞<br>
显然q &lt; M[1, 2]，于是得M[1, 2] = 5000<br></p> <p>i = 2时，j = 2 + 2 - 1 = 3</p> <p>M[2, 3] = ∞，进入关于k的循环，k ∈ [2, 2]<br>
当k = 2时，计算q的值：<br>
q = M[2, 2] + M[3, 3] + p[1] * p[2] * p[3] = 0 + 0 + 100 * 5 * 50 = 25000<br>
比较q和M[2, 3]的值，M[2, 3] = ∞<br>
显然q &lt; M[2, 3]，于是得M[2, 3] = 25000<br></p> <p>i = 3时，j = 2 + 3 - 1 = 4</p> <p>M[3, 4] = ∞，进入关于k的循环，k ∈ [3, 3]<br>
当k = 3时，计算q的值：<br>
q = M[3, 3] + M[4, 4] + p[2] * p[3] * p[4] = 0 + 0 + 5 * 50 * 1 = 250<br>
比较q和M[3, 4]的值，M[3, 4] = ∞<br>
显然q &lt; M[3, 4]，于是得M[3, 4] = 250<br></p> <table><thead><tr><th>i/j</th> <th>0</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th></tr></thead> <tbody><tr><td>0</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>empty</td></tr> <tr><td>1</td> <td>empty</td> <td>0</td> <td>5000</td> <td></td> <td></td></tr> <tr><td>2</td> <td>empty</td> <td>empty</td> <td>0</td> <td>25000</td> <td></td></tr> <tr><td>3</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>0</td> <td>250</td></tr> <tr><td>4</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>0</td></tr></tbody></table> <h4 id="矩阵链l长度为3"><a href="#矩阵链l长度为3" class="header-anchor">#</a> 矩阵链L长度为3</h4> <p>i = 1时，j = 3 + 1 - 1 = 3</p> <p>M[1, 3] = ∞，进入关于k的循环，k ∈ [1, 2]<br>
当k = 1时，计算q的值：<br>
q = M[1, 1] + M[2, 3] + p[0] * p[1] * p[3] = 0 + 25000 + 10 * 100 * 50 = 75000<br>
比较q和M[1, 3]的值，M[1, 3] = ∞<br>
显然q &lt; M[1, 3]，于是得M[1, 3] = 75000<br></p> <p>当k = 2时，计算q的值：<br>
q = M[1, 2] + M[3, 3] + p[0] * p[2] * p[3] = 5000 + 0 + 10 * 5 * 50 = 7500<br>
比较q和M[1, 3]的值，M[1, 3] = 75000<br>
显然q &lt; M[1, 3]，于是得M[1, 3] = 7500<br></p> <p>i = 2时，j = 3 + 2 - 1 = 4</p> <p>M[2, 4] = ∞，进入关于k的循环，k ∈ [2, 3]<br>
当k = 2时，计算q的值：<br>
q = M[2, 2] + M[3, 4] + p[1] * p[2] * p[4] = 0 + 250 + 100 * 5 * 1 = 750<br>
比较q和M[2, 4]的值，M[2, 4] = ∞<br>
显然q &lt; M[2, 4]，于是得M[2, 4] = 750<br></p> <p>当k = 3时，计算q的值：<br>
q = M[2, 3] + M[4, 4] + p[1] * p[3] * p[4] = 25000 + 0 + 100 * 50 * 1 = 30000<br>
比较q和M[2, 4]的值，M[2, 4] = 750<br>
显然q &gt;= M[2, 4]，于是得M[2, 4] = 750<br></p> <table><thead><tr><th>i/j</th> <th>0</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th></tr></thead> <tbody><tr><td>0</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>empty</td></tr> <tr><td>1</td> <td>empty</td> <td>0</td> <td>5000</td> <td>7500</td> <td></td></tr> <tr><td>2</td> <td>empty</td> <td>empty</td> <td>0</td> <td>25000</td> <td>750</td></tr> <tr><td>3</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>0</td> <td>250</td></tr> <tr><td>4</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>0</td></tr></tbody></table> <h4 id="矩阵链l长度为4"><a href="#矩阵链l长度为4" class="header-anchor">#</a> 矩阵链L长度为4</h4> <p>i = 1时，j = 4 + 1 - 1 = 4</p> <p>M[1, 4] = ∞，进入关于k的循环，k ∈ [1, 3]<br>
当k = 1时，计算q的值：<br>
q = M[1, 1] + M[2, 4] + p[0] * p[1] * p[4] = 0 + 750 + 10 * 100 * 1 = 1750<br>
比较q和M[1, 4]的值，M[1, 4] = ∞<br>
显然q &lt; M[1, 4]，于是得M[1, 4] = 1750<br></p> <p>当k = 2时，计算q的值：<br>
q = M[1, 2] + M[3, 4] + p[0] * p[2] * p[4] = 5000 + 250 + 10 * 5 * 1 = 5300<br>
比较q和M[1, 4]的值，M[1, 4] = 1750<br>
显然q &gt;= M[1, 4]，于是得M[1, 4] = 1750<br></p> <p>当k = 3时，计算q的值：<br>
q = M[1, 3] + M[4, 4] + p[0] * p[3] * p[4] = 7500 + 0 + 10 * 50 * 1 = 8000<br>
比较q和M[1, 4]的值，M[1, 4] = 1750<br>
显然q &gt;= M[1, 4]，于是得M[1, 4] = 1750<br></p> <table><thead><tr><th>i/j</th> <th>0</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th></tr></thead> <tbody><tr><td>0</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>empty</td></tr> <tr><td>1</td> <td>empty</td> <td>0</td> <td>5000</td> <td>7500</td> <td>1750</td></tr> <tr><td>2</td> <td>empty</td> <td>empty</td> <td>0</td> <td>25000</td> <td>750</td></tr> <tr><td>3</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>0</td> <td>250</td></tr> <tr><td>4</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>empty</td> <td>0</td></tr></tbody></table> <p>最后输出的结果是M[1，n]，即M[1, 4] = 1750</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/JiWeiZ/FEMap/edit/master/docs/Algorithm/dynamic-program.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">12/28/2018, 3:44:01 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/FEMap/Algorithm/search.html" class="prev">
          搜索算法
        </a></span> <span class="next"><a href="/FEMap/Algorithm/greedy.html">
          贪心算法
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/FEMap/assets/js/app.07aba767.js" defer></script><script src="/FEMap/assets/js/7.41c30484.js" defer></script>
  </body>
</html>
