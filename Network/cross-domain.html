<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>跨域处理 | 前端知识小记</title>
    <meta name="description" content="Personal Front End Knowledge Map">
    <link rel="icon" href="/FEMap/logo.png">
  <link rel="manifest" href="/FEMap/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="./public/logo.png">
  <meta name="msapplication-TileImage" content="./public/logo.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/FEMap/assets/css/0.styles.46758652.css" as="style"><link rel="preload" href="/FEMap/assets/js/app.07aba767.js" as="script"><link rel="preload" href="/FEMap/assets/js/14.11c8990d.js" as="script"><link rel="prefetch" href="/FEMap/assets/js/10.6160a8a1.js"><link rel="prefetch" href="/FEMap/assets/js/11.58d7da13.js"><link rel="prefetch" href="/FEMap/assets/js/12.d82377e4.js"><link rel="prefetch" href="/FEMap/assets/js/13.69c6fc0a.js"><link rel="prefetch" href="/FEMap/assets/js/15.e7e5ac4e.js"><link rel="prefetch" href="/FEMap/assets/js/16.74f923c2.js"><link rel="prefetch" href="/FEMap/assets/js/17.d4cda157.js"><link rel="prefetch" href="/FEMap/assets/js/18.47acc33a.js"><link rel="prefetch" href="/FEMap/assets/js/19.cd73ed28.js"><link rel="prefetch" href="/FEMap/assets/js/2.df56f01e.js"><link rel="prefetch" href="/FEMap/assets/js/20.46d38a64.js"><link rel="prefetch" href="/FEMap/assets/js/21.c86d268c.js"><link rel="prefetch" href="/FEMap/assets/js/22.2a5c5ef9.js"><link rel="prefetch" href="/FEMap/assets/js/23.10cb81bf.js"><link rel="prefetch" href="/FEMap/assets/js/24.be70320c.js"><link rel="prefetch" href="/FEMap/assets/js/25.8ea26c41.js"><link rel="prefetch" href="/FEMap/assets/js/26.e52d061e.js"><link rel="prefetch" href="/FEMap/assets/js/27.f4257bb6.js"><link rel="prefetch" href="/FEMap/assets/js/28.da932e8e.js"><link rel="prefetch" href="/FEMap/assets/js/29.0c93adb6.js"><link rel="prefetch" href="/FEMap/assets/js/3.c20905f7.js"><link rel="prefetch" href="/FEMap/assets/js/30.a9c3edb7.js"><link rel="prefetch" href="/FEMap/assets/js/31.06c0bd16.js"><link rel="prefetch" href="/FEMap/assets/js/32.e8032021.js"><link rel="prefetch" href="/FEMap/assets/js/33.b18fa339.js"><link rel="prefetch" href="/FEMap/assets/js/34.3db52ecb.js"><link rel="prefetch" href="/FEMap/assets/js/35.6fc0c7d0.js"><link rel="prefetch" href="/FEMap/assets/js/36.2635250b.js"><link rel="prefetch" href="/FEMap/assets/js/37.04bd4304.js"><link rel="prefetch" href="/FEMap/assets/js/38.eca7423d.js"><link rel="prefetch" href="/FEMap/assets/js/39.7bc43a19.js"><link rel="prefetch" href="/FEMap/assets/js/4.44c0aa72.js"><link rel="prefetch" href="/FEMap/assets/js/40.d012cce0.js"><link rel="prefetch" href="/FEMap/assets/js/41.3c942633.js"><link rel="prefetch" href="/FEMap/assets/js/42.a1671e8d.js"><link rel="prefetch" href="/FEMap/assets/js/43.221d040e.js"><link rel="prefetch" href="/FEMap/assets/js/44.01b4fee0.js"><link rel="prefetch" href="/FEMap/assets/js/45.f2e2ea06.js"><link rel="prefetch" href="/FEMap/assets/js/46.7ec82695.js"><link rel="prefetch" href="/FEMap/assets/js/47.0e955f03.js"><link rel="prefetch" href="/FEMap/assets/js/48.91c5d6d5.js"><link rel="prefetch" href="/FEMap/assets/js/49.568d659d.js"><link rel="prefetch" href="/FEMap/assets/js/5.4007d5b2.js"><link rel="prefetch" href="/FEMap/assets/js/50.ed024948.js"><link rel="prefetch" href="/FEMap/assets/js/51.e33531d0.js"><link rel="prefetch" href="/FEMap/assets/js/52.ad8a1762.js"><link rel="prefetch" href="/FEMap/assets/js/53.267f2d4f.js"><link rel="prefetch" href="/FEMap/assets/js/54.65af1a35.js"><link rel="prefetch" href="/FEMap/assets/js/55.dc78eaa5.js"><link rel="prefetch" href="/FEMap/assets/js/56.11966346.js"><link rel="prefetch" href="/FEMap/assets/js/57.df055972.js"><link rel="prefetch" href="/FEMap/assets/js/58.8a361639.js"><link rel="prefetch" href="/FEMap/assets/js/59.998b1de9.js"><link rel="prefetch" href="/FEMap/assets/js/6.41d00c0a.js"><link rel="prefetch" href="/FEMap/assets/js/60.b5c2cae7.js"><link rel="prefetch" href="/FEMap/assets/js/61.f2cc1d27.js"><link rel="prefetch" href="/FEMap/assets/js/62.7be0ab04.js"><link rel="prefetch" href="/FEMap/assets/js/63.6ebfd592.js"><link rel="prefetch" href="/FEMap/assets/js/64.e96b5edb.js"><link rel="prefetch" href="/FEMap/assets/js/65.03c5da29.js"><link rel="prefetch" href="/FEMap/assets/js/66.ef16a307.js"><link rel="prefetch" href="/FEMap/assets/js/67.e0c5beb3.js"><link rel="prefetch" href="/FEMap/assets/js/68.b436f696.js"><link rel="prefetch" href="/FEMap/assets/js/69.79957ff2.js"><link rel="prefetch" href="/FEMap/assets/js/7.41c30484.js"><link rel="prefetch" href="/FEMap/assets/js/70.a0613b33.js"><link rel="prefetch" href="/FEMap/assets/js/8.db996418.js"><link rel="prefetch" href="/FEMap/assets/js/9.c21a2975.js">
    <link rel="stylesheet" href="/FEMap/assets/css/0.styles.46758652.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/FEMap/" class="home-link router-link-active"><!----> <span class="site-name">前端知识小记</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/JiWeiZ/FEMap" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"> <a href="https://github.com/JiWeiZ/FEMap" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>JS</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/JS/array.html" class="sidebar-link">数组相关</a></li><li><a href="/FEMap/JS/object.html" class="sidebar-link">对象相关</a></li><li><a href="/FEMap/JS/function.html" class="sidebar-link">函数和闭包</a></li><li><a href="/FEMap/JS/event.html" class="sidebar-link">事件代理</a></li><li><a href="/FEMap/JS/event-loop.html" class="sidebar-link">Event Loop</a></li><li><a href="/FEMap/JS/distance.html" class="sidebar-link">页面各种距离</a></li><li><a href="/FEMap/JS/regex.html" class="sidebar-link">正则表达式</a></li><li><a href="/FEMap/JS/ajax.html" class="sidebar-link">Ajax</a></li><li><a href="/FEMap/JS/high-level.html" class="sidebar-link">高阶函数</a></li><li><a href="/FEMap/JS/byhand.html" class="sidebar-link">手写系列</a></li><li><a href="/FEMap/JS/repaint-reflow.html" class="sidebar-link">重绘和回流</a></li><li><a href="/FEMap/JS/recursive.html" class="sidebar-link">递归的优化</a></li><li><a href="/FEMap/JS/GC.html" class="sidebar-link">垃圾收集和内存泄漏</a></li><li><a href="/FEMap/JS/async-solution.html" class="sidebar-link">异步解决方案</a></li><li><a href="/FEMap/JS/design-patterns.html" class="sidebar-link">设计模式</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/CSS/css-selector.html" class="sidebar-link">CSS选择器</a></li><li><a href="/FEMap/CSS/text.html" class="sidebar-link">文本</a></li><li><a href="/FEMap/CSS/visual-format.html" class="sidebar-link">基本视觉格式化</a></li><li><a href="/FEMap/CSS/float-position.html" class="sidebar-link">浮动和定位</a></li><li><a href="/FEMap/CSS/visibility-z-index.html" class="sidebar-link">可见性和z-index</a></li><li><a href="/FEMap/CSS/layout.html" class="sidebar-link">布局</a></li><li><a href="/FEMap/CSS/CSS3-flex.html" class="sidebar-link">CSS3: flex</a></li><li><a href="/FEMap/CSS/CSS3-grid.html" class="sidebar-link">CSS3: grid</a></li><li><a href="/FEMap/CSS/CSS3-animation.html" class="sidebar-link">CSS3: animation</a></li><li><a href="/FEMap/CSS/CSS3-background.html" class="sidebar-link">CSS3: background</a></li><li><a href="/FEMap/CSS/CSS3-border.html" class="sidebar-link">CSS3: border</a></li><li><a href="/FEMap/CSS/CSS3-font.html" class="sidebar-link">CSS3: font</a></li><li><a href="/FEMap/CSS/CSS3-gradient.html" class="sidebar-link">CSS3: gradient</a></li><li><a href="/FEMap/CSS/CSS3-transform.html" class="sidebar-link">CSS3: transform</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>网络</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/Network/network-architecture.html" class="sidebar-link">五层协议</a></li><li><a href="/FEMap/Network/link-layer.html" class="sidebar-link">链路层</a></li><li><a href="/FEMap/Network/network-layer.html" class="sidebar-link">网络层</a></li><li><a href="/FEMap/Network/transport-layer.html" class="sidebar-link">运输层</a></li><li><a href="/FEMap/Network/cross-domain.html" aria-current="page" class="active sidebar-link">跨域处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FEMap/Network/cross-domain.html#图像ping" class="sidebar-link">图像ping</a></li><li class="sidebar-sub-header"><a href="/FEMap/Network/cross-domain.html#jsonp" class="sidebar-link">JSONP</a></li><li class="sidebar-sub-header"><a href="/FEMap/Network/cross-domain.html#cors" class="sidebar-link">CORS</a></li></ul></li><li><a href="/FEMap/Network/DNS.html" class="sidebar-link">DNS</a></li><li><a href="/FEMap/Network/CDN.html" class="sidebar-link">CDN</a></li><li><a href="/FEMap/Network/cache.html" class="sidebar-link">缓存策略</a></li><li><a href="/FEMap/Network/network-process.html" class="sidebar-link">输入url到显示页面的步骤(以HTTP为例)</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>一些题目</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/Questions/questions.html" class="sidebar-link">一些面试题</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>算法/数据结构</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/Algorithm/BST.html" class="sidebar-link">BST</a></li><li><a href="/FEMap/Algorithm/AVL.html" class="sidebar-link">AVL</a></li><li><a href="/FEMap/Algorithm/sort.html" class="sidebar-link">排序算法</a></li><li><a href="/FEMap/Algorithm/search.html" class="sidebar-link">搜索算法</a></li><li><a href="/FEMap/Algorithm/dynamic-program.html" class="sidebar-link">动态规划</a></li><li><a href="/FEMap/Algorithm/greedy.html" class="sidebar-link">贪心算法</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>工程化</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/" aria-current="page" class="sidebar-link">前端知识小记</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/Vue/responsive.html" class="sidebar-link">响应式原理</a></li><li><a href="/FEMap/Vue/v-model.html" class="sidebar-link">v-model</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Node</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/" aria-current="page" class="sidebar-link">前端知识小记</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Express</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/" aria-current="page" class="sidebar-link">前端知识小记</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Koa</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/" aria-current="page" class="sidebar-link">前端知识小记</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Git</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/FEMap/" aria-current="page" class="sidebar-link">前端知识小记</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="跨域处理"><a href="#跨域处理" class="header-anchor">#</a> 跨域处理</h1> <ol><li>图像ping</li> <li>jsonp</li> <li>CORS</li> <li>document.domain + iframe</li> <li>location.hash + iframe</li> <li>window.name + iframe</li> <li>postMessage</li> <li>nginx代理</li> <li>nodejs中间件代理</li> <li>WebSocket</li></ol> <h2 id="图像ping"><a href="#图像ping" class="header-anchor">#</a> 图像ping</h2> <p>动态img，同jsonp差不多，url跨域，但是只能get，而且没有回调，用于浏览器与服务器的单向通信，常用于广告统计访问量。</p> <h2 id="jsonp"><a href="#jsonp" class="header-anchor">#</a> JSONP</h2> <p>前端document.createElement('script')，动态插入src，并将callback作为query传过去。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 前端代码</span>
<span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span>
script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;https://www.foo.com/bar?callback=handleJSONP&quot;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>script<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">handleJSONP</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// deal with responce</span>
<span class="token punctuation">}</span>
</code></pre></div><p>后端需要这样处理JSONP请求</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> callback <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>callback
<span class="token keyword">let</span> sendData <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{&quot;code&quot;: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>code_generator<span class="token punctuation">.</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, &quot;expire&quot;: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>code_generator<span class="token punctuation">.</span>expire<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">let</span> jsonp <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sendData<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span>
res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>jsonp<span class="token punctuation">)</span>
</code></pre></div><h3 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h3> <p>利用JSONP实现协商轮询的例子</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">div</span><span class="token punctuation">{</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 2px solid<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">p</span> <span class="token punctuation">{</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 1px solid<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">span</span> <span class="token punctuation">{</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputCode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发送<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tips<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>还未发送<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

    <span class="token keyword">let</span> code <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#code&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> codePrevious<span class="token punctuation">,</span> expire
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        time<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

    <span class="token keyword">function</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>codePrevious <span class="token operator">!==</span> res<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            codePrevious <span class="token operator">=</span> res<span class="token punctuation">.</span>code
            code<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> codePrevious
            expire <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>expire<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token function">jsonp</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost:8067/qrcode?callback=poll&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> expire<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> scriptElemet <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#jsonp'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>scriptElemet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> parent <span class="token operator">=</span> scriptElemet<span class="token punctuation">.</span>parentNode
            parent<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>scriptElemet<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span>
        script<span class="token punctuation">.</span>src <span class="token operator">=</span> src
        script<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">&quot;jsonp&quot;</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>script<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:8067/qrcode?callback=poll&quot;</span><span class="token punctuation">)</span>

    <span class="token keyword">function</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            method <span class="token operator">=</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
            url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:8067/check/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                tips<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">)</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    button<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">check</span><span class="token punctuation">(</span>inputCode<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>服务端</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">CodeGenerator</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> <span class="token keyword">undefined</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>previousCode <span class="token operator">=</span> <span class="token keyword">undefined</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>expire <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">''</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">check</span> <span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> code <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">||</span> code <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>previousCode <span class="token operator">?</span> <span class="token string">'验证通过'</span> <span class="token operator">:</span> <span class="token string">'验证不通过'</span>
    <span class="token punctuation">}</span>
    <span class="token function">setNewCode</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">''</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">)</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>previousCode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>code<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">update</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>expire <span class="token operator">=</span> time
        <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setNewCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> code_generator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CodeGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
code_generator<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/qrcode'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 自己拼jsonp</span>
    <span class="token keyword">let</span> callback <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>callback
    <span class="token keyword">let</span> sendData <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{&quot;code&quot;: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>code_generator<span class="token punctuation">.</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, &quot;expire&quot;: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>code_generator<span class="token punctuation">.</span>expire<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}</span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">let</span> jsonp <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sendData<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>jsonp<span class="token punctuation">)</span>

    <span class="token comment">// 使用express的jsonp函数</span>
    <span class="token comment">// res.jsonp({code: code_generator.code, expire: code_generator.expire})</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/check/:code'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> checkCode <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>code
    <span class="token keyword">let</span> msg <span class="token operator">=</span> code_generator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span>checkCode<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-control-Allow-Origin'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8067</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="cors"><a href="#cors" class="header-anchor">#</a> CORS</h2> <h3 id="简单请求"><a href="#简单请求" class="header-anchor">#</a> 简单请求</h3> <p>简单请求不会触发 CORS 预检。若请求满足所有下述条件，则该请求可视为“简单请求”：</p> <p>使用下列方法之一：</p> <ul><li>GET</li> <li>HEAD</li> <li>POST</li></ul> <p>Fetch 规范定义了<code>对 CORS 安全的首部字段集合</code>，不得人为设置该集合之外的其他首部字段。该集合为：</p> <ul><li>Accept</li> <li>Accept-Language</li> <li>Content-Language</li> <li>Content-Type ，仅限于下列三个：
<ul><li>text/plain</li> <li>multipart/form-data</li> <li>application/x-www-form-urlencoded</li></ul></li> <li>DPR</li> <li>Downlink</li> <li>Save-Data</li> <li>Viewport-Width</li> <li>Width</li> <li>请求中的任意XMLHttpRequestUpload 对象均没有注册任何事件监听器；XMLHttpRequestUpload 对象可以使用 XMLHttpRequest.upload 属性访问。</li> <li>请求中没有使用 ReadableStream 对象。</li></ul> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82" target="_blank" rel="noopener noreferrer">参考 MDN：简单请求<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="处理简单请求"><a href="#处理简单请求" class="header-anchor">#</a> 处理简单请求</h4> <p>对于简单请求只需要处理2个字段：请求头Origin和响应头Access-Control-Allow-Origin</p> <h3 id="预检"><a href="#预检" class="header-anchor">#</a> 预检</h3> <p>如果不是简单请求，浏览器默认会使用<code>OPTIONS</code>方法发起一个预检请求到服务器，以获知服务器是否允许该实际请求。</p> <p>对于预检请求，服务端必须需要处理3个字段：</p> <ol><li>Access-control-Allow-Origin</li> <li>Access-control-Allow-Methods</li> <li>Access-Control-Allow-Headers</li></ol> <p>还有1个可选字段：</p> <ol><li>Access-Control-Max-Age: 应该将这个预检请求缓存多长时间（单位：秒）</li></ol> <h4 id="示例-2"><a href="#示例-2" class="header-anchor">#</a> 示例</h4> <p>前端使用application/json传数据，并且还传了个自定义的请求头Foo-Header，显然这不是简单请求</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputCode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发送<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tips<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>还未发送<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">function</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      method <span class="token operator">=</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
      url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:8066/check</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> code <span class="token punctuation">}</span><span class="token punctuation">)</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">)</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tips<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span>
    xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Foo-Header'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> code <span class="token operator">=</span> inputCode<span class="token punctuation">.</span>value
    <span class="token function">check</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><img src="data:image/png;base64,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" alt="1545026532626"></p> <p>服务端用express，这个时候必须处理预检请求</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;limit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2048kb&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// bodyParser.urlencoded 用来解析 request 中 body的 urlencoded字符，</span>
<span class="token comment">// 只支持utf-8的编码的字符,也支持自动的解析gzip 和 zlib.</span>
<span class="token comment">// 返回的对象是一个键值对，当extended为false的时候，键值对中的值就为</span>
<span class="token comment">// 'String'或'Array'形式，为true的时候，则可为任何数据类型。</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> extended<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token string">'/check'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-control-Allow-Origin'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-control-Allow-Methods'</span><span class="token punctuation">,</span> <span class="token string">'POST, GET, OPTIONS'</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Headers'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type, Foo-Header'</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/check'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> checkCode <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>code
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-control-Allow-Origin'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">接收到前端数据：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>checkCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8066</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Sever running at 8066</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p><img src="/FEMap/assets/img/1545026471758.a1b0ec37.png" alt="1545026471758"></p> <p><img src="/FEMap/assets/img/1545026482918.dadefcfb.png" alt="1545026482918"></p> <p>可以看到客户区发了2次请求，一次请求方法是OPTIONS，一次是POST</p> <p><a href="https://github.com/JiWeiZ/FEMap/tree/master/codes/CORS" target="_blank" rel="noopener noreferrer">代码地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="带凭据的请求"><a href="#带凭据的请求" class="header-anchor">#</a> 带凭据的请求</h3> <p>如果要传cookie、SSL证明等，前端需要设置</p> <div class="language-js extra-class"><pre class="language-js"><code>xhr<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre></div><p>服务器接受带凭据的请求，需设置响应头</p> <div class="language-js extra-class"><pre class="language-js"><code>Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Credentials<span class="token operator">:</span> <span class="token boolean">true</span>
</code></pre></div><h3 id="cors头"><a href="#cors头" class="header-anchor">#</a> CORS头</h3> <h4 id="请求头"><a href="#请求头" class="header-anchor">#</a> 请求头</h4> <ol><li>Origin</li> <li>Access-Control-Request-Method</li> <li>Access-Control-Request-Headers</li></ol> <h4 id="响应头"><a href="#响应头" class="header-anchor">#</a> 响应头</h4> <ol><li>Access-Control-Allow-Origin</li> <li>Access-Control-Allow-Headers</li> <li>Access-Control-Allow-Methods</li> <li>Access-Control-Max-Age</li> <li>Access-Control-Allow-Credentials</li> <li>Access-Control-Expose-Headers</li></ol> <p>在跨域访问时，XHR对象的getResponseHeader()方法只能拿到一些最基本的响应头，Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Pragma，如果要访问其他头，则需要服务器设置本响应头。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 这样浏览器就能够通过getResponseHeader访问Custom-Header和 Another-Custom-Header 响应头了。</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Expose-Headers'</span><span class="token punctuation">,</span> <span class="token string">'Custom-Header, Another-Custom-Header'</span><span class="token punctuation">)</span>

<span class="token comment">// 这样可以访问所有响应头</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Expose-Headers'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span>
</code></pre></div><p><a href="https://segmentfault.com/a/1190000011145364" target="_blank" rel="noopener noreferrer">参考文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/JiWeiZ/FEMap/edit/master/docs/Network/cross-domain.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">12/19/2018, 5:02:36 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/FEMap/Network/transport-layer.html" class="prev">
          运输层
        </a></span> <span class="next"><a href="/FEMap/Network/DNS.html">
          DNS
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/FEMap/assets/js/app.07aba767.js" defer></script><script src="/FEMap/assets/js/14.11c8990d.js" defer></script>
  </body>
</html>
